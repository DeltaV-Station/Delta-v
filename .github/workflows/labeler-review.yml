name: "Labels: Approved (Real)"
on:
  workflow_run:
    workflows:
    - "Labels: Approved"
permissions:
  contents: read
  pull-requests: write
jobs:
  add_label:
    name: Add labels
    # Change the repository name after you've made sure the team name is correct for your fork!
    if: ${{ (github.repository == 'DeltaV-Station/Delta-v') && (github.event.review.state == 'APPROVED') }}
    runs-on: ubuntu-latest
    steps:
    - uses: tspascoal/get-user-teams-membership@v3
      id: directionMember
      with:
        username: ${{ github.event.workflow_run.actor.login }}
        team: "direction"
        GITHUB_TOKEN: ${{ secrets.LABELER_PAT }}
    - if: ${{ steps.directionMember.outputs.isTeamMember == 'true' }}
      uses: actions-ecosystem/action-add-labels@v1
      with:
        labels: "S: Direction Approved"
    - uses: tspascoal/get-user-teams-membership@v3
      id: maintMember
      with:
        username: ${{ github.event.workflow_run.actor.login }}
        team: "maintainers"
        GITHUB_TOKEN: ${{ secrets.LABELER_PAT }}
    - if: ${{ steps.maintMember.outputs.isTeamMember == 'true' }}
      uses: actions-ecosystem/action-add-labels@v1
      with:
        labels: "S: Approved"
