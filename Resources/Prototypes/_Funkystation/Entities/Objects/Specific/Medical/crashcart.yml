# SPDX-FileCopyrightText: 2025 mkanke-real <mikekanke@gmail.com>
#
# SPDX-License-Identifier: MIT

- type: entity
  id: CrashCart
  parent: [BaseStructureDynamic, StructureWheeled]
  name: crash cart
  description: Meds on the move for when the patient decides to tombstone.
  components:
  - type: Sprite
    noRot: true
    sprite: _Funkystation/Objects/Specific/Medical/crashcart.rsi
    state: cart
  - type: Appearance
  - type: Rotatable
  - type: InteractionOutline
  - type: ItemSlots
    slots:
      defib_slot1:
        whitelist:
          tags:
          - DefibrillatorCompact
        insertOnInteract: true
        priority: 9
      tank_slot1:
        whitelist:
          tags:
          - OxygenTank
          - NitrogenTank
          - NitrousOxideTank
          - PlasmaTank
          - ClownEmergencyOxygenTank
          - ExtendedEmergencyNitrogenTank
          - AirTank
        insertOnInteract: true
        priority: 8
  - type: ContainerContainer
    containers:
      storagebase: !type:Container
        ents: []
      tank_slot1: !type:ContainerSlot {}
      defib_slot1: !type:ContainerSlot {}
  - type: ItemMapper
    mapLayers:
      front_oxy:
        minCount: 1
        whitelist:
          tags:
          - OxygenTank
      front_nit:
        minCount: 1
        whitelist:
          tags:
          - NitrogenTank
          - ExtendedEmergencyNitrogenTank
      front_fun:
        minCount: 1
        whitelist:
          tags:
          - ClownEmergencyOxygenTank
      front_slp:
        minCount: 1
        whitelist:
          tags:
          - NitrousOxideTank
      front_plasma:
        minCount: 1
        whitelist:
          tags:
          - PlasmaTank
      front_plain:
        minCount: 1
        whitelist:
          tags:
          - AirTank
      defib:
        minCount: 1
        whitelist:
          tags:
          - DefibrillatorCompact
    sprite: _Funkystation/Objects/Specific/Medical/crashcart.rsi
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.3
        density: 250
        layer:
        - TableLayer
        mask:
        - TableMask
  - type: UserInterface
    interfaces:
      enum.StorageUiKey.Key:
        type: StorageBoundUserInterface
  - type: Storage
    maxItemSize: Huge
    grid:
    - 0,0,5,1
    - 0,3,5,4
    - 0,6,5,7
    - 0,9,5,10
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 400
  - type: StaticPrice
    price: 500
  - type: DnaSubstanceTrace

- type: entity
  id: CrashCartFilled
  parent: [BaseStructureDynamic, StructureWheeled]
  name: crash cart
  description: Meds on the move for when the patient decides to tombstone.
  suffix: Filled
  components:
  - type: Sprite
    noRot: true
    sprite: _Funkystation/Objects/Specific/Medical/crashcart.rsi
    state: cart
  - type: Appearance
  - type: Rotatable
  - type: InteractionOutline
  - type: ItemSlots
    slots:
      defib_slot1:
        startingItem: DefibrillatorCompact
        whitelist:
          tags:
          - DefibrillatorCompact
        insertOnInteract: true
        priority: 9
      tank_slot1:
        startingItem: OxygenTank
        whitelist:
          tags:
          - OxygenTank
          - NitrogenTank
          - NitrousOxideTank
          - PlasmaTank
          - ClownEmergencyOxygenTank
          - ExtendedEmergencyNitrogenTank
          - AirTank
        insertOnInteract: true
        priority: 8
  - type: ContainerContainer
    containers:
      storagebase: !type:Container
        ents: []
      tank_slot1: !type:ContainerSlot {}
      defib_slot1: !type:ContainerSlot {}
  - type: ItemMapper
    mapLayers:
      front_oxy:
        minCount: 1
        whitelist:
          tags:
          - OxygenTank
      front_nit:
        minCount: 1
        whitelist:
          tags:
          - NitrogenTank
          - ExtendedEmergencyNitrogenTank
      front_fun:
        minCount: 1
        whitelist:
          tags:
          - ClownEmergencyOxygenTank
      front_slp:
        minCount: 1
        whitelist:
          tags:
          - NitrousOxideTank
      front_plasma:
        minCount: 1
        whitelist:
          tags:
          - PlasmaTank
      front_plain:
        minCount: 1
        whitelist:
          tags:
          - AirTank
      defib:
        minCount: 1
        whitelist:
          tags:
          - DefibrillatorCompact
    sprite: _Funkystation/Objects/Specific/Medical/crashcart.rsi
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.3
        density: 250
        layer:
        - TableLayer
        mask:
        - TableMask
  - type: UserInterface
    interfaces:
      enum.StorageUiKey.Key:
        type: StorageBoundUserInterface
  - type: Storage
    maxItemSize: Huge
    grid:
    - 0,0,5,1
    - 0,3,5,4
    - 0,6,5,7
    - 0,9,5,10
  - type: StorageFill
    contents:
    - id: Brutepack
      amount: 2
    - id: Gauze
      amount: 2
    - id: Ointment
      amount: 2
    - id: PillCanisterTricordrazine
    - id: PillCanisterGranibitulari
    - id: PillCanisterAiuri
    - id: PillCanisterLenturi
    - id: PillCanisterLibital
    - id: PillCanisterProbital
    - id: PillCanisterMultiver
    - id: PillCanisterCharcoal
    - id: PillCanisterDexalin
    - id: PillCanisterPotassiumIodide
    - id: PillCanisterHyronalin
    - id: SyringeSaline
      amount: 2
    - id: SyringeIpecac
    - id: SyringeEthylredoxrazine
    - id: SyringeConvermol
      amount: 2
    - id: SyringePhalanximine
    - id: AntiPoisonMedipen
      amount: 2
    - id: EmergencyMedipen
      amount: 2
    - id: RadAutoInjector
      amount: 1
    - id: MedicalPatchPrefilledAntiRad
      amount: 2
    - id: ClothingMaskBreathMedical
      amount: 3
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 400
  - type: StaticPrice
    price: 500
  - type: DnaSubstanceTrace
